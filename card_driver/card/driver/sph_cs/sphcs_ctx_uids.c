/********************************************
 * Copyright (C) 2019 Intel Corporation
 *
 * SPDX-License-Identifier: GPL-2.0-or-later
 ********************************************/

#include <linux/kernel.h>
#include "sw_counters.h"
#include "sph_log.h"

static const struct sph_sw_counters_group_info s_groups_info[] = {
	{"uids", "Context->uid map"}
};

static const struct sph_sw_counter_info s_counters_info[] = {
	{0, "uid0", "uid of context 0"},
	{0, "uid1", "uid of context 1"},
	{0, "uid2", "uid of context 2"},
	{0, "uid3", "uid of context 3"},
	{0, "uid4", "uid of context 4"},
	{0, "uid5", "uid of context 5"},
	{0, "uid6", "uid of context 6"},
	{0, "uid7", "uid of context 7"},
	{0, "uid8", "uid of context 8"},
	{0, "uid9", "uid of context 9"},
	{0, "uid10", "uid of context 10"},
	{0, "uid11", "uid of context 11"},
	{0, "uid12", "uid of context 12"},
	{0, "uid13", "uid of context 13"},
	{0, "uid14", "uid of context 14"},
	{0, "uid15", "uid of context 15"},
	{0, "uid16", "uid of context 16"},
	{0, "uid17", "uid of context 17"},
	{0, "uid18", "uid of context 18"},
	{0, "uid19", "uid of context 19"},
	{0, "uid20", "uid of context 20"},
	{0, "uid21", "uid of context 21"},
	{0, "uid22", "uid of context 22"},
	{0, "uid23", "uid of context 23"},
	{0, "uid24", "uid of context 24"},
	{0, "uid25", "uid of context 25"},
	{0, "uid26", "uid of context 26"},
	{0, "uid27", "uid of context 27"},
	{0, "uid28", "uid of context 28"},
	{0, "uid29", "uid of context 29"},
	{0, "uid30", "uid of context 30"},
	{0, "uid31", "uid of context 31"},
	{0, "uid32", "uid of context 32"},
	{0, "uid33", "uid of context 33"},
	{0, "uid34", "uid of context 34"},
	{0, "uid35", "uid of context 35"},
	{0, "uid36", "uid of context 36"},
	{0, "uid37", "uid of context 37"},
	{0, "uid38", "uid of context 38"},
	{0, "uid39", "uid of context 39"},
	{0, "uid40", "uid of context 40"},
	{0, "uid41", "uid of context 41"},
	{0, "uid42", "uid of context 42"},
	{0, "uid43", "uid of context 43"},
	{0, "uid44", "uid of context 44"},
	{0, "uid45", "uid of context 45"},
	{0, "uid46", "uid of context 46"},
	{0, "uid47", "uid of context 47"},
	{0, "uid48", "uid of context 48"},
	{0, "uid49", "uid of context 49"},
	{0, "uid50", "uid of context 50"},
	{0, "uid51", "uid of context 51"},
	{0, "uid52", "uid of context 52"},
	{0, "uid53", "uid of context 53"},
	{0, "uid54", "uid of context 54"},
	{0, "uid55", "uid of context 55"},
	{0, "uid56", "uid of context 56"},
	{0, "uid57", "uid of context 57"},
	{0, "uid58", "uid of context 58"},
	{0, "uid59", "uid of context 59"},
	{0, "uid60", "uid of context 60"},
	{0, "uid61", "uid of context 61"},
	{0, "uid62", "uid of context 62"},
	{0, "uid63", "uid of context 63"},
	{0, "uid64", "uid of context 64"},
	{0, "uid65", "uid of context 65"},
	{0, "uid66", "uid of context 66"},
	{0, "uid67", "uid of context 67"},
	{0, "uid68", "uid of context 68"},
	{0, "uid69", "uid of context 69"},
	{0, "uid70", "uid of context 70"},
	{0, "uid71", "uid of context 71"},
	{0, "uid72", "uid of context 72"},
	{0, "uid73", "uid of context 73"},
	{0, "uid74", "uid of context 74"},
	{0, "uid75", "uid of context 75"},
	{0, "uid76", "uid of context 76"},
	{0, "uid77", "uid of context 77"},
	{0, "uid78", "uid of context 78"},
	{0, "uid79", "uid of context 79"},
	{0, "uid80", "uid of context 80"},
	{0, "uid81", "uid of context 81"},
	{0, "uid82", "uid of context 82"},
	{0, "uid83", "uid of context 83"},
	{0, "uid84", "uid of context 84"},
	{0, "uid85", "uid of context 85"},
	{0, "uid86", "uid of context 86"},
	{0, "uid87", "uid of context 87"},
	{0, "uid88", "uid of context 88"},
	{0, "uid89", "uid of context 89"},
	{0, "uid90", "uid of context 90"},
	{0, "uid91", "uid of context 91"},
	{0, "uid92", "uid of context 92"},
	{0, "uid93", "uid of context 93"},
	{0, "uid94", "uid of context 94"},
	{0, "uid95", "uid of context 95"},
	{0, "uid96", "uid of context 96"},
	{0, "uid97", "uid of context 97"},
	{0, "uid98", "uid of context 98"},
	{0, "uid99", "uid of context 99"},
	{0, "uid100", "uid of context 100"},
	{0, "uid101", "uid of context 101"},
	{0, "uid102", "uid of context 102"},
	{0, "uid103", "uid of context 103"},
	{0, "uid104", "uid of context 104"},
	{0, "uid105", "uid of context 105"},
	{0, "uid106", "uid of context 106"},
	{0, "uid107", "uid of context 107"},
	{0, "uid108", "uid of context 108"},
	{0, "uid109", "uid of context 109"},
	{0, "uid110", "uid of context 110"},
	{0, "uid111", "uid of context 111"},
	{0, "uid112", "uid of context 112"},
	{0, "uid113", "uid of context 113"},
	{0, "uid114", "uid of context 114"},
	{0, "uid115", "uid of context 115"},
	{0, "uid116", "uid of context 116"},
	{0, "uid117", "uid of context 117"},
	{0, "uid118", "uid of context 118"},
	{0, "uid119", "uid of context 119"},
	{0, "uid120", "uid of context 120"},
	{0, "uid121", "uid of context 121"},
	{0, "uid122", "uid of context 122"},
	{0, "uid123", "uid of context 123"},
	{0, "uid124", "uid of context 124"},
	{0, "uid125", "uid of context 125"},
	{0, "uid126", "uid of context 126"},
	{0, "uid127", "uid of context 127"},
	{0, "uid128", "uid of context 128"},
	{0, "uid129", "uid of context 129"},
	{0, "uid130", "uid of context 130"},
	{0, "uid131", "uid of context 131"},
	{0, "uid132", "uid of context 132"},
	{0, "uid133", "uid of context 133"},
	{0, "uid134", "uid of context 134"},
	{0, "uid135", "uid of context 135"},
	{0, "uid136", "uid of context 136"},
	{0, "uid137", "uid of context 137"},
	{0, "uid138", "uid of context 138"},
	{0, "uid139", "uid of context 139"},
	{0, "uid140", "uid of context 140"},
	{0, "uid141", "uid of context 141"},
	{0, "uid142", "uid of context 142"},
	{0, "uid143", "uid of context 143"},
	{0, "uid144", "uid of context 144"},
	{0, "uid145", "uid of context 145"},
	{0, "uid146", "uid of context 146"},
	{0, "uid147", "uid of context 147"},
	{0, "uid148", "uid of context 148"},
	{0, "uid149", "uid of context 149"},
	{0, "uid150", "uid of context 150"},
	{0, "uid151", "uid of context 151"},
	{0, "uid152", "uid of context 152"},
	{0, "uid153", "uid of context 153"},
	{0, "uid154", "uid of context 154"},
	{0, "uid155", "uid of context 155"},
	{0, "uid156", "uid of context 156"},
	{0, "uid157", "uid of context 157"},
	{0, "uid158", "uid of context 158"},
	{0, "uid159", "uid of context 159"},
	{0, "uid160", "uid of context 160"},
	{0, "uid161", "uid of context 161"},
	{0, "uid162", "uid of context 162"},
	{0, "uid163", "uid of context 163"},
	{0, "uid164", "uid of context 164"},
	{0, "uid165", "uid of context 165"},
	{0, "uid166", "uid of context 166"},
	{0, "uid167", "uid of context 167"},
	{0, "uid168", "uid of context 168"},
	{0, "uid169", "uid of context 169"},
	{0, "uid170", "uid of context 170"},
	{0, "uid171", "uid of context 171"},
	{0, "uid172", "uid of context 172"},
	{0, "uid173", "uid of context 173"},
	{0, "uid174", "uid of context 174"},
	{0, "uid175", "uid of context 175"},
	{0, "uid176", "uid of context 176"},
	{0, "uid177", "uid of context 177"},
	{0, "uid178", "uid of context 178"},
	{0, "uid179", "uid of context 179"},
	{0, "uid180", "uid of context 180"},
	{0, "uid181", "uid of context 181"},
	{0, "uid182", "uid of context 182"},
	{0, "uid183", "uid of context 183"},
	{0, "uid184", "uid of context 184"},
	{0, "uid185", "uid of context 185"},
	{0, "uid186", "uid of context 186"},
	{0, "uid187", "uid of context 187"},
	{0, "uid188", "uid of context 188"},
	{0, "uid189", "uid of context 189"},
	{0, "uid190", "uid of context 190"},
	{0, "uid191", "uid of context 191"},
	{0, "uid192", "uid of context 192"},
	{0, "uid193", "uid of context 193"},
	{0, "uid194", "uid of context 194"},
	{0, "uid195", "uid of context 195"},
	{0, "uid196", "uid of context 196"},
	{0, "uid197", "uid of context 197"},
	{0, "uid198", "uid of context 198"},
	{0, "uid199", "uid of context 199"},
	{0, "uid200", "uid of context 200"},
	{0, "uid201", "uid of context 201"},
	{0, "uid202", "uid of context 202"},
	{0, "uid203", "uid of context 203"},
	{0, "uid204", "uid of context 204"},
	{0, "uid205", "uid of context 205"},
	{0, "uid206", "uid of context 206"},
	{0, "uid207", "uid of context 207"},
	{0, "uid208", "uid of context 208"},
	{0, "uid209", "uid of context 209"},
	{0, "uid210", "uid of context 210"},
	{0, "uid211", "uid of context 211"},
	{0, "uid212", "uid of context 212"},
	{0, "uid213", "uid of context 213"},
	{0, "uid214", "uid of context 214"},
	{0, "uid215", "uid of context 215"},
	{0, "uid216", "uid of context 216"},
	{0, "uid217", "uid of context 217"},
	{0, "uid218", "uid of context 218"},
	{0, "uid219", "uid of context 219"},
	{0, "uid220", "uid of context 220"},
	{0, "uid221", "uid of context 221"},
	{0, "uid222", "uid of context 222"},
	{0, "uid223", "uid of context 223"},
	{0, "uid224", "uid of context 224"},
	{0, "uid225", "uid of context 225"},
	{0, "uid226", "uid of context 226"},
	{0, "uid227", "uid of context 227"},
	{0, "uid228", "uid of context 228"},
	{0, "uid229", "uid of context 229"},
	{0, "uid230", "uid of context 230"},
	{0, "uid231", "uid of context 231"},
	{0, "uid232", "uid of context 232"},
	{0, "uid233", "uid of context 233"},
	{0, "uid234", "uid of context 234"},
	{0, "uid235", "uid of context 235"},
	{0, "uid236", "uid of context 236"},
	{0, "uid237", "uid of context 237"},
	{0, "uid238", "uid of context 238"},
	{0, "uid239", "uid of context 239"},
	{0, "uid240", "uid of context 240"},
	{0, "uid241", "uid of context 241"},
	{0, "uid242", "uid of context 242"},
	{0, "uid243", "uid of context 243"},
	{0, "uid244", "uid of context 244"},
	{0, "uid245", "uid of context 245"},
	{0, "uid246", "uid of context 246"},
	{0, "uid247", "uid of context 247"},
	{0, "uid248", "uid of context 248"},
	{0, "uid249", "uid of context 249"},
	{0, "uid250", "uid of context 250"},
	{0, "uid251", "uid of context 251"},
	{0, "uid252", "uid of context 252"},
	{0, "uid253", "uid of context 253"},
	{0, "uid254", "uid of context 254"},
	{0, "uid255", "uid of context 255"}
};

static const struct sph_sw_counters_set s_counters_set = {
	"ctx_uids",
	false,
	s_counters_info,
	ARRAY_SIZE(s_counters_info),
	s_groups_info,
	ARRAY_SIZE(s_groups_info)
};

static void *s_counters_handle;
struct sph_sw_counters *g_ctx_uids_counters;

int sphcs_ctx_uids_init(void)
{
	int rc;

	rc = sph_create_sw_counters_info_node(NULL,
					      &s_counters_set,
					      NULL,
					      &s_counters_handle);
	if (rc) {
		sph_log_err(START_UP_LOG, "Failed to create ctx_uids sw counters info\n");
		return rc;
	}

	rc = sph_create_sw_counters_values_node(s_counters_handle,
						0,
						NULL,
						&g_ctx_uids_counters);
	if (rc) {
		sph_log_err(START_UP_LOG, "Failed to create ctx_uids sw counters values\n");
		sph_remove_sw_counters_info_node(s_counters_handle);
		return rc;
	}

	return 0;
}

void sphcs_ctx_uids_fini(void)
{
	sph_remove_sw_counters_values_node(g_ctx_uids_counters);
	sph_remove_sw_counters_info_node(s_counters_handle);
}
